var sliderizr;!function(e){angular.module("sliderizr",["ngAnimate"]).constant("_",_)}(sliderizr||(sliderizr={})),angular.module("sliderizr").run(["$templateCache",function(e){e.put("templates/sliderizr/panel-inner.html","<div><header><h1>{{$title}}</h1><button ng-click=$close() class=btn-close>close</button></header><div class=panel-body ng-transclude></div></div>"),e.put("templates/sliderizr/panel.html","<div class=site-panel ng-click=$setActive() ng-class=\"{active: $active, 'panel-sm': $panelSize == 1, 'panel-md': $panelSize == 2}\"></div>")}]);var sliderizr;!function(e){"use strict";function t(){return new n}var n=function(){function e(){this.routes={},this.config={panelTemplateUrl:"templates/sliderizr/panel.html",panelInnerTemplateUrl:"templates/sliderizr/panel-inner.html"}}return e.prototype.when=function(e,t){return this.routes[e]=angular.copy(t),this},e.prototype.otherwise=function(e){var t="string"==typeof e?{redirectTo:e}:e;return this.when(null,t)},e.prototype.$get=function(){return new r(this.routes,this.config)},e}(),r=function(){function e(e,t){this.routes=e,this.config=t}return e}();angular.module("sliderizr").provider("panelRoute",t)}(sliderizr||(sliderizr={}));var sliderizr;!function(e){"use strict";function t(e,t,r,i,o,a,s,l,c,u,p,h){return new n(e,t,r,i,o,a,s,l,c,u,p,h)}var n=function(){function e(e,t,n,r,i,o,a,s,l,c,u,p){var h=this;this.$rootScope=e,this.$controller=t,this.$compile=n,this.panelRoute=r,this.$q=i,this._=o,this.$animate=a,this.$timeout=s,this.panelUrlService=l,this.$injector=c,this.$sce=u,this.$templateRequest=p,this.openPanels=[],this.loadPanelsFromPath(),$(window).on("hashchange",function(){e.$apply(function(){h.onLocationChanged()})})}return e.prototype.getActivePanel=function(){var e=this._.find(this.openPanels,function(e){return e.panelScope.$active});return e.instance},e.prototype.getAllOpenPanels=function(){return this._.map(this.openPanels,function(e){return e.instance})},e.prototype.close=function(e,t){var n=this,r=this.getPanelByInstance(e);this.closeBranch(r).then(function(){n.updateUrl(),n.setActive(),r.deferred.resolve(t)})},e.prototype.open=function(e,t,n,r){var i,o=this,a={name:e};t&&t.result?i=t:(a.params=t,i=n);var s=this.findExistingPanel(a,i);if(s)return this.setActive(s.instance),s.instance;var l=this.createPanel(a,i);return l.opened.then(function(){o.$animate.enabled(!0),o.updateUrl()}),this.setActive(l),l},e.prototype.createPanelScope=function(e,t,n,r){var i=this,o=(r?this.getPanelByInstance(r).panelScope:this.$rootScope).$new();return o.$close=function(t){i.close(e,t)},o.$dismiss=function(t){i.dsimiss(e,t)},o.$setActive=function(){i.setActive(e,!0)},o.$title=n||"No Title",o.$active=!1,o.$openChildPanel=function(t,n){i.open(t,n,e)},o.$panelSize=t.size||3,e.setTitle=function(e){o.$title=e},o},e.prototype.createPanelInstance=function(e,t,n){var r=this,i={opened:t,result:n,options:e,close:function(e){r.close(i,e)},dismiss:function(e){r.dsimiss(i,e)},setActive:function(){r.setActive(i)},setTitle:function(){},openChild:function(e){return r.open(e,i)}};return i},e.prototype.createController=function(e,t,n,r){var i=angular.extend({$panelInstance:t,$scope:n},r),o=this.$controller(e.controller,i);e.controllerAs&&(n[e.controllerAs]=o)},e.prototype.createPanelElement=function(e,t){var n=this,r=this.$sce.getTrustedResourceUrl(e),i=this.$sce.getTrustedResourceUrl(this.panelRoute.config.panelTemplateUrl);return this.$q.all([this.$templateRequest(i),this.$templateRequest(r)]).then(function(e){var r=angular.element(e[0]).html(e[1]);return n.$compile(r)(t)})},e.prototype.createPanel=function(e,t){var n=this,r=this.$q.defer(),i=this.$q.defer(),o=this.panelRoute.routes[e.name]||this.panelRoute.routes["null"];if(o&&o.redirectTo&&(e="string"==typeof o.redirectTo?{name:o.redirectTo}:o.redirectTo,o=this.panelRoute.routes[e.name]),!o)throw new Error('No route found with the name "'+e.name+'"');var a=this.createPanelInstance(e,i.promise,r.promise);return this.prepareToOpenPanel(o,t).then(function(s){var l=n.createPanelScope(a,o,e.title||o.title,t);o.controller&&n.createController(o,a,l,s),n.createPanelElement(o.templateUrl,l).then(function(e){var o={deferred:r,instance:a,panelScope:l,element:e,parent:n.getPanelByInstance(t)};n.openPanels.push(o),angular.element(".panel-container").append(e),n.$animate.addClass(e,"open").then(function(){i.resolve(a)})})}),a},e.prototype.dsimiss=function(e,t){var n=this.getPanelByInstance(e);n.deferred.reject(t),this.removePanel(n)},e.prototype.setActive=function(e,t){var n=this;if(this.setActivePromise){if(t)return;this.$timeout.cancel(this.setActivePromise),this.setActivePromise=null}e||(e=this.openPanels[this.openPanels.length-1].instance);var r=function(){n.setActivePromise=null,n.openPanels.forEach(function(e){return e.panelScope.$active=!1});var t=n.getPanelByInstance(e);t&&(t.panelScope.$active=!0)};t?r():this.setActivePromise=this.$timeout(r,100)},e.prototype.closeAll=function(){var e=this,t=[];return this._.each(this.openPanels,function(n){t.push(e.removePanel(n))}),this.$q.all(t)},e.prototype.prepareToOpenPanel=function(e,t){var n=this,r=[];return e.resolve&&angular.forEach(e.resolve,function(e,t){r.push(angular.isString(e)?n.$injector.get(e):n.$injector.invoke(e,null,t))}),r.push(t?this.closeChildren(_.find(this.openPanels,{instance:t}),!1):this.closeAll()),this.$q.all(r).then(function(t){var n={};if(e.resolve){var r=0;angular.forEach(e.resolve,function(e,i){n[i]=t[r++]})}return n})},e.prototype.findExistingPanel=function(e,t){var n=this,r=this.getPanelByInstance(t);return this._.find(this.openPanels,function(t){return(e===t.instance.options||n.compareOptions(e,t.instance.options))&&t.parent==r})},e.prototype.compareOptions=function(e,t){var n;if(e.name!==t.name)return!1;for(n in e.params)if(e.params.hasOwnProperty(n)&&e.params[n]!==t.params[n])return!1;for(n in t.params)if(t.params.hasOwnProperty(n)&&e.params[n]!==t.params[n])return!1;return!0},e.prototype.onLocationChanged=function(){var e=this;this.panelUrlService.isUrlCurrent(this.currentUrl)||this.closeAll().then(function(){e.loadPanelsFromPath()})},e.prototype.loadPanelsFromPath=function(){var e=this;this.$animate.enabled(!1);var t=this.panelUrlService.deserializeUrl(),n=function(r,i){var o=t[r];e.createPanel({name:o.name,params:o.params},i).opened.then(function(i){r+1<t.length?n(r+1,i):(e.$animate.enabled(!0),e.setActive(),e.updateUrl())})};n(0,null)},e.prototype.closeChildren=function(e,t){var n=this,r=this.$q.defer(),i=this.getChildPanels(e),o=function(e){i.splice(0,1),n.closeBranch(e).then(function(){i.length>0?o(i[0]):r.resolve()})};return i.length>0?o(i[0]):r.resolve(),r.promise},e.prototype.closeBranch=function(e){var t=this,n=this.$q.defer();return this.closeChildren(e).then(function(){t.removePanel(e).then(function(){n.resolve()})}),n.promise},e.prototype.getChildPanels=function(e){return this._.where(this.openPanels,{parent:e})},e.prototype.getPanelByInstance=function(e){return this._.find(this.openPanels,{instance:e})},e.prototype.removePanel=function(e){var t=this,n=this.$q.defer();return this.$animate.removeClass(e.element,"open").then(function(){var r=t.openPanels.indexOf(e);e.element.remove(),t.openPanels.splice(r,1),n.resolve()}),n.promise},e.prototype.updateUrl=function(){this.currentUrl=this.getOpenPanelUrl(),window.location.hash=this.currentUrl},e.prototype.getOpenPanelUrl=function(){return this.panelUrlService.createUrl(_.map(this.openPanels,function(e){return e.instance}))},e}();e.PanelService=n,t.$inject=["$rootScope","$controller","$compile","panelRoute","$q","_","$animate","$timeout","panelUrlService","$injector","$sce","$templateRequest"],angular.module("sliderizr").factory("panelService",t)}(sliderizr||(sliderizr={}));var sliderizr;!function(e){"use strict";function t(){return new n}var n=function(){function e(){this.pageDividerChar="/",this.queryIndicatorChar=";",this.queryDividerChar=",",this.queryEqualityChar="="}return e.prototype.createUrl=function(e){var t=this,n=!1,r="";return e.forEach(function(e){r+=t.pageDividerChar,r+=e.options.name,n=!1;for(var i in e.options.params)e.options.params.hasOwnProperty(i)&&(n?r+=t.queryDividerChar:(r+=t.queryIndicatorChar,n=!0),r+=i+t.queryEqualityChar+e.options.params[i])}),r},e.prototype.deserializeUrl=function(e){var t=this,n=[],r=(e||this.getWindowLocation()||"").replace(/\\/g,this.pageDividerChar);0===r.indexOf("/")&&(r=r.substr(1)),r||(r="dashboard");var i,o=r.split(this.pageDividerChar);return o.forEach(function(e){var r,o=e.indexOf(t.queryIndicatorChar),a=e;if(o>0){a=e.substr(0,o);var s=e.substr(o+1).split(t.queryDividerChar);r=t.parseRouteParams(s)}var l={name:a,params:r||{}};n.push(l),i=l}),n},e.prototype.parseRouteParams=function(e){var t=this,n={};return e.forEach(function(e){var r=e.split(t.queryEqualityChar);n[r[0]]=r[1]}),n},e.prototype.isUrlCurrent=function(e){return this.getWindowLocation()===e},e.prototype.getWindowLocation=function(){var e=window.location.hash;return e.indexOf("#")>=0?e.substr(1):e},e}();angular.module("sliderizr").factory("panelUrlService",t)}(sliderizr||(sliderizr={}));var sliderizr;!function(e){"use strict";function t(e,t){function n(e,t){function n(){r&&r.stop(!0,!1),r=a,a.animate({scrollLeft:i()},200,function(){r=null})}function i(){var e,n=a.scrollLeft(),r=a.outerWidth(),i=o(),s=t.prev(),l=0===s.length?0:s.offset().left+s.outerWidth()-a.offset().left+n,c=l+i;if(n>l)e=l;else{if(!(c-r>n))return;e=c-r+50}return e}function o(){if(!t.is(".open-add"))return t.outerWidth();var e=$("<div />").attr("class",t.attr("class")).removeClass("open-add").removeClass("open-add-active").appendTo(t.parent()),n=e.outerWidth();return e.remove(),n}var a=t.parent();e.$watch("$active",function(e){e&&n()})}var r,i={restrict:"C",transclude:!0,templateUrl:t.config.panelInnerTemplateUrl,link:n};return i}t.$inject=["$timeout","panelRoute"],angular.module("sliderizr").directive("sitePanel",t)}(sliderizr||(sliderizr={}));var sliderizr;!function(e){"use strict";function t(e){function t(){}var n={restrict:"C",link:t};return n}t.$inject=["panelService"],angular.module("sliderizr").directive("panelContainer",t)}(sliderizr||(sliderizr={}));